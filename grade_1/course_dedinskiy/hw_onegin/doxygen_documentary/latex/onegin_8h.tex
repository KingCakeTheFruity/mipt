\hypertarget{onegin_8h}{}\doxysection{C\+:/\+Users/maxim/\+Desktop/mipt/grade\+\_\+1/course\+\_\+dedinskiy/hw\+\_\+onegin/onegin.h File Reference}
\label{onegin_8h}\index{C:/Users/maxim/Desktop/mipt/grade\_1/course\_dedinskiy/hw\_onegin/onegin.h@{C:/Users/maxim/Desktop/mipt/grade\_1/course\_dedinskiy/hw\_onegin/onegin.h}}


Main library for Onegin to work.  


{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include \char`\"{}general.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{onegin_8h_a45d88f30d901015b1751d24168912c1c}{calculate\+\_\+ending}} (\mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$line, const size\+\_\+t rhyme\+\_\+depth)
\begin{DoxyCompactList}\small\item\em Calculates an ending of a line. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{onegin_8h_a2816dad1604297801ae0f5b33ee44be6}{rhyme\+\_\+compare\+\_\+lines}} (const void $\ast$$\ast$elem1, const void $\ast$$\ast$elem2)
\begin{DoxyCompactList}\small\item\em End-\/starting comparator for two lines. \end{DoxyCompactList}\item 
char \mbox{\hyperlink{onegin_8h_aaca129d4300c27e81376e85ab4cc913d}{rhyming\+\_\+lines}} (const \mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$first, const \mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$second, const size\+\_\+t depth)
\begin{DoxyCompactList}\small\item\em Checks if lines are rhyming. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{onegin_8h_a57decb75338e2619a6b0a124c656fb1e}{gen\+\_\+strofa}} (const \mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$$\ast$lines, const size\+\_\+t lines\+\_\+cnt, unsigned int $\ast$buffer, const size\+\_\+t rhyme\+\_\+depth)
\begin{DoxyCompactList}\small\item\em Generates new strofa from random strings. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Main library for Onegin to work. 



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{onegin_8h_a45d88f30d901015b1751d24168912c1c}\label{onegin_8h_a45d88f30d901015b1751d24168912c1c}} 
\index{onegin.h@{onegin.h}!calculate\_ending@{calculate\_ending}}
\index{calculate\_ending@{calculate\_ending}!onegin.h@{onegin.h}}
\doxysubsubsection{\texorpdfstring{calculate\_ending()}{calculate\_ending()}}
{\footnotesize\ttfamily void calculate\+\_\+ending (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$}]{line,  }\item[{const size\+\_\+t}]{rhyme\+\_\+depth }\end{DoxyParamCaption})}



Calculates an ending of a line. 

Ignores all symbols that are not letters in the end of string takes last R\+H\+Y\+M\+E\+\_\+\+D\+E\+P\+TH chars Stores output into given line. Works for rhyming purposes


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em line} & line to be process \\
\hline
\end{DoxyParams}


Definition at line 59 of file onegin.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{59                                                               \{}
\DoxyCodeLine{60     \textcolor{keywordtype}{int} i = line-\/>\mbox{\hyperlink{struct_line_af469f686717985609006257cc80f9fe2}{len}} -\/ 1;}
\DoxyCodeLine{61     \textcolor{keywordflow}{while}(!\mbox{\hyperlink{general_8h_ad99b3916e60cadb49a9cdbd44e0a1492}{is\_countable}}(line-\/>\mbox{\hyperlink{struct_line_ad081955d87f3cc679c0fec87ed8b024f}{string}}[i]) \&\& i) \{}
\DoxyCodeLine{62         -\/-\/i;}
\DoxyCodeLine{63     \}}
\DoxyCodeLine{64     \textcolor{keywordflow}{if} (!i) \{}
\DoxyCodeLine{65         \textcolor{keywordflow}{return};}
\DoxyCodeLine{66     \}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < rhyme\_depth; ++j) \{}
\DoxyCodeLine{69         line-\/>\mbox{\hyperlink{struct_line_afa71332d5025991bf16b543969062d30}{ending}}[j] = line-\/>\mbox{\hyperlink{struct_line_ad081955d87f3cc679c0fec87ed8b024f}{string}}[i -\/ rhyme\_depth + j + 1];}
\DoxyCodeLine{70     \}}
\DoxyCodeLine{71 \}}

\end{DoxyCode}


References Line\+::ending, is\+\_\+countable(), Line\+::len, and Line\+::string.



Referenced by main().

\mbox{\Hypertarget{onegin_8h_a57decb75338e2619a6b0a124c656fb1e}\label{onegin_8h_a57decb75338e2619a6b0a124c656fb1e}} 
\index{onegin.h@{onegin.h}!gen\_strofa@{gen\_strofa}}
\index{gen\_strofa@{gen\_strofa}!onegin.h@{onegin.h}}
\doxysubsubsection{\texorpdfstring{gen\_strofa()}{gen\_strofa()}}
{\footnotesize\ttfamily void gen\+\_\+strofa (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$$\ast$}]{lines,  }\item[{const size\+\_\+t}]{lines\+\_\+cnt,  }\item[{unsigned int $\ast$}]{buffer,  }\item[{const size\+\_\+t}]{rhyme\+\_\+depth }\end{DoxyParamCaption})}



Generates new strofa from random strings. 

Given N\+OT M\+E\+S\+S\+ED UP lines of Onegin generates indexes of strings to be used in new strofa


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lines} & stringview over text of Onegin \\
\hline
\mbox{\texttt{ in}}  & {\em lines\+\_\+cnt} & number of lines in text \\
\hline
\mbox{\texttt{ out}}  & {\em buffer} & array of size\+\_\+t to store output into \\
\hline
\mbox{\texttt{ in}}  & {\em R\+H\+Y\+M\+E\+\_\+\+D\+E\+P\+TH} & depth of rhyme to check (look at rhyming\+\_\+lines for desription) \\
\hline
\end{DoxyParams}


Definition at line 110 of file onegin.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{110                                                                                                               \{}
\DoxyCodeLine{111     assert(\mbox{\hyperlink{struct_file_adea76cb2f293b2d8e8ba54cb0f77b543}{lines}});}
\DoxyCodeLine{112     assert(buffer);}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     srand(time(NULL));}
\DoxyCodeLine{115     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{general_8h_a13eddf75a7a1d8d6753cc724a7ebe9dea8e734a16d0cec75737e2672777b7eb59}{STROFA\_SIZE}}; ++i) \{}
\DoxyCodeLine{116         \textcolor{keywordtype}{int} itter = 0;}
\DoxyCodeLine{117         \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{118             ++itter;}
\DoxyCodeLine{119             \textcolor{keywordflow}{if} (itter == 100) \{}
\DoxyCodeLine{120                 i = 0;}
\DoxyCodeLine{121                 \textcolor{keywordflow}{continue};}
\DoxyCodeLine{122             \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124             \textcolor{keywordtype}{int} line\_index = (((int) rand()) \% (\mbox{\hyperlink{struct_file_a85f126080299822a269dc997380bc82d}{lines\_cnt}} / 14)) * 14 + i;}
\DoxyCodeLine{125             \textcolor{keyword}{const} \mbox{\hyperlink{struct_line}{Line\_t}} *line = \mbox{\hyperlink{struct_file_adea76cb2f293b2d8e8ba54cb0f77b543}{lines}}[line\_index];}
\DoxyCodeLine{126             \textcolor{keywordflow}{if} (i == 0 || i == 1 || i == 4 || i == 6 || i == 8 || i == 9 || i == 12) \{  \textcolor{comment}{// COMMENTS}}
\DoxyCodeLine{127                 buffer[i] = line\_index;}
\DoxyCodeLine{128                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{129             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (i == 5 || i == 7 || i == 10 || i == 13) \{}
\DoxyCodeLine{130                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{onegin_8h_aaca129d4300c27e81376e85ab4cc913d}{rhyming\_lines}}(line, \mbox{\hyperlink{struct_file_adea76cb2f293b2d8e8ba54cb0f77b543}{lines}}[buffer[i -\/ 1]], rhyme\_depth)) \{}
\DoxyCodeLine{131                     buffer[i] = line\_index;}
\DoxyCodeLine{132                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{133                 \}}
\DoxyCodeLine{134             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (i == 2 || i == 3) \{}
\DoxyCodeLine{135                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{onegin_8h_aaca129d4300c27e81376e85ab4cc913d}{rhyming\_lines}}(line, \mbox{\hyperlink{struct_file_adea76cb2f293b2d8e8ba54cb0f77b543}{lines}}[buffer[i -\/ 2]], rhyme\_depth)) \{}
\DoxyCodeLine{136                     buffer[i] = line\_index;}
\DoxyCodeLine{137                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{138                 \}}
\DoxyCodeLine{139             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{140                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{onegin_8h_aaca129d4300c27e81376e85ab4cc913d}{rhyming\_lines}}(line, \mbox{\hyperlink{struct_file_adea76cb2f293b2d8e8ba54cb0f77b543}{lines}}[buffer[i -\/ 3]], rhyme\_depth)) \{}
\DoxyCodeLine{141                     buffer[i] = line\_index;}
\DoxyCodeLine{142                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{143                 \}}
\DoxyCodeLine{144             \}}
\DoxyCodeLine{145         \}}
\DoxyCodeLine{146     \}}
\DoxyCodeLine{147 \}}

\end{DoxyCode}


References File\+::lines, File\+::lines\+\_\+cnt, rhyming\+\_\+lines(), and S\+T\+R\+O\+F\+A\+\_\+\+S\+I\+ZE.



Referenced by main().

\mbox{\Hypertarget{onegin_8h_a2816dad1604297801ae0f5b33ee44be6}\label{onegin_8h_a2816dad1604297801ae0f5b33ee44be6}} 
\index{onegin.h@{onegin.h}!rhyme\_compare\_lines@{rhyme\_compare\_lines}}
\index{rhyme\_compare\_lines@{rhyme\_compare\_lines}!onegin.h@{onegin.h}}
\doxysubsubsection{\texorpdfstring{rhyme\_compare\_lines()}{rhyme\_compare\_lines()}}
{\footnotesize\ttfamily int rhyme\+\_\+compare\+\_\+lines (\begin{DoxyParamCaption}\item[{const void $\ast$$\ast$}]{elem1,  }\item[{const void $\ast$$\ast$}]{elem2 }\end{DoxyParamCaption})}



End-\/starting comparator for two lines. 

Compares two lines representing them as reversed without manually doing this


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em elem1,elem2} & lines to compare \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
an int $<$0 if elem1$<$elem2, 0 if elem1=elem2, $>$0 if elem1$>$elem2 
\end{DoxyReturn}


Definition at line 73 of file onegin.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{73                                                                 \{}
\DoxyCodeLine{74     \textcolor{keyword}{const} \mbox{\hyperlink{struct_line}{Line\_t}} *line1 = *elem1;}
\DoxyCodeLine{75     \textcolor{keyword}{const} \mbox{\hyperlink{struct_line}{Line\_t}} *line2 = *elem2;}
\DoxyCodeLine{76     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* str1 = line1-\/>\mbox{\hyperlink{struct_line_ad081955d87f3cc679c0fec87ed8b024f}{string}};}
\DoxyCodeLine{77     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* str2 = line2-\/>\mbox{\hyperlink{struct_line_ad081955d87f3cc679c0fec87ed8b024f}{string}};}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     \textcolor{keywordtype}{int} i = line1-\/>\mbox{\hyperlink{struct_line_af469f686717985609006257cc80f9fe2}{len}} -\/ 1;}
\DoxyCodeLine{80     \textcolor{keywordtype}{int} j = line2-\/>\mbox{\hyperlink{struct_line_af469f686717985609006257cc80f9fe2}{len}} -\/ 1;}
\DoxyCodeLine{81     \textcolor{keywordflow}{while} (i >= 0 \&\& j >= 0) \{}
\DoxyCodeLine{82         \textcolor{keywordflow}{while} (!\mbox{\hyperlink{general_8h_ad99b3916e60cadb49a9cdbd44e0a1492}{is\_countable}}(str1[i]) \&\& str1[i]) \{}
\DoxyCodeLine{83             -\/-\/i;}
\DoxyCodeLine{84         \}}
\DoxyCodeLine{85         \textcolor{keywordflow}{while} (!\mbox{\hyperlink{general_8h_ad99b3916e60cadb49a9cdbd44e0a1492}{is\_countable}}(str2[j]) \&\& str2[j]) \{}
\DoxyCodeLine{86             -\/-\/j;}
\DoxyCodeLine{87         \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89         \textcolor{keywordflow}{if} (str1[i] != str2[j] || i * j == 0) \{}
\DoxyCodeLine{90             \textcolor{keywordflow}{return} str1[i] -\/ str2[j];}
\DoxyCodeLine{91         \}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93         -\/-\/i;}
\DoxyCodeLine{94         -\/-\/j;}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96     \textcolor{keywordflow}{return} str1[i] -\/ str2[j];}
\DoxyCodeLine{97 \}}

\end{DoxyCode}


References is\+\_\+countable(), Line\+::len, and Line\+::string.

\mbox{\Hypertarget{onegin_8h_aaca129d4300c27e81376e85ab4cc913d}\label{onegin_8h_aaca129d4300c27e81376e85ab4cc913d}} 
\index{onegin.h@{onegin.h}!rhyming\_lines@{rhyming\_lines}}
\index{rhyming\_lines@{rhyming\_lines}!onegin.h@{onegin.h}}
\doxysubsubsection{\texorpdfstring{rhyming\_lines()}{rhyming\_lines()}}
{\footnotesize\ttfamily char rhyming\+\_\+lines (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$}]{first,  }\item[{const \mbox{\hyperlink{general_8h_a3b81977bf89d5e7a1c698a42cc0d66b6}{Line\+\_\+t}} $\ast$}]{second,  }\item[{const size\+\_\+t}]{depth }\end{DoxyParamCaption})}



Checks if lines are rhyming. 

Compares endings of the lines that are calculated by calculate\+\_\+ending function rhyming strings are those having R\+H\+Y\+M\+E\+\_\+\+D\+E\+P\+T\+H-\/1 symbols same in the end and difference in R\+H\+Y\+M\+E\+\_\+\+D\+E\+P\+TH symbol from the end


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em first,second} & given string to check rhyming \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if lines are rhyming, else false 
\end{DoxyReturn}


Definition at line 99 of file onegin.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{99                                                                                   \{}
\DoxyCodeLine{100     \textcolor{keywordflow}{if} (first == second) \{}
\DoxyCodeLine{101         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{102     \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keywordflow}{if} (strcmp((\textcolor{keywordtype}{char}*) first-\/>\mbox{\hyperlink{struct_line_afa71332d5025991bf16b543969062d30}{ending}} + 1, (\textcolor{keywordtype}{char}*) second-\/>\mbox{\hyperlink{struct_line_afa71332d5025991bf16b543969062d30}{ending}} + 1) || first-\/>\mbox{\hyperlink{struct_line_afa71332d5025991bf16b543969062d30}{ending}}[0] == second-\/>\mbox{\hyperlink{struct_line_afa71332d5025991bf16b543969062d30}{ending}}[0]) \{}
\DoxyCodeLine{105         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{106     \}}
\DoxyCodeLine{107     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{108 \}}

\end{DoxyCode}


References Line\+::ending.



Referenced by gen\+\_\+strofa().

